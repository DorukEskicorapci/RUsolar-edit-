/*
 * state.h
 *
 *  Created on: Dec 12, 2024
 *      Author: Nathaniel Correa
 */

#ifndef INC_STATE_H_
#define INC_STATE_H_

#include <stdint.h>
#include <stdbool.h>
#include "main.h"

typedef struct {
	uint32_t 	timestamp;
	float 		motor_rpm;
	float 		car_speed;
	bool 		motor_forward;
	bool 		motor_power;
	bool 		motor_contactor_requested;
	bool 		main_power_requested;
} mainboard_state_t;

void init_state(mainboard_state_t* state);

void speed_tick_increment();

void state_recalculate(mainboard_state_t* state, mainboard_state_t* last, float rpm, float speed);

#endif /* INC_STATE_H_ */
